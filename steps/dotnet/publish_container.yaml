steps:
  - task: DotNetCoreCLI@2
    displayName: 'Publish container'
    inputs:
      command: "publish"
      publishWebProjects: false
      projects: '**/**/Rsp.IrasService.csproj'
      arguments: '-t:PublishContainer -p ContainerImageTags=$(semver.majorMinorPatch)'
  - task: AzureCLI@2
    displayName: Build and Push to DEV ACR
    inputs:
      azureSubscription: $(azureServiceConnection)
      scriptType: pscore
      scriptLocation: inlineScript
      inlineScript: |
        az acr login --name crrspshared2i2oqdevuks
        docker tag rsp-irasservice:$(semver.majorMinorPatch) crrspshared2i2oqdevuks.azurecr.io/rsp-irasservice:$(semver.majorMinorPatch)
        docker push crrspshared2i2oqdevuks.azurecr.io/rsp-irasservice:$(semver.majorMinorPatch)
