steps:
  - task: DotNetCoreCLI@2
    displayName: 'Publish container'
    inputs:
      command: "publish"
      publishWebProjects: false
      projects: '**/**/Rsp.IrasService.csproj'
      arguments: '-t:PublishContainer -p ContainerImageTags=$(buildid) -p:ContainerImageName=rsp-irasService'
      #arguments: '-t:PublishContainer -p ContainerImageTags=$(buildid) -p:ContainerRegistry=crrspacaypvupdevuks.azurecr.io -p:ContainerImageName=irasService -p:ContainerRepository=irasServiceRepository'
  - name: Tag built container with Azure Container Registry url
    uses: actions-hub/docker/cli@master
    with:
      args: tag rsp-irasService:$(buildid) crrspacaypvupdevuks.azurecr.io/rsp-irasService:$(buildid)

# steps:
#   - task: AzureContainerApps@1
#     inputs:
#       acrName: 'crrspacaypvupdevuks'
#       containerAppName: 'ca-simple-hello'
#       resourceGroup: 'rg-rsp-aca-spoke-dev-uks'
#       containerAppEnvironment: 'cae-rsp-aca-dev-uks'
#       ingress: 'internal'
#       azureSubscription: $(azureServiceConnection)
#       location: 'uksouth'
#       appSourcePath: '**/**/Rsp.IrasService.csproj'